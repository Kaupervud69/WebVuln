### **SQL(server)**

* **Описание**
SQL Injection — уязвимость, при которой злоумышленник вставляет вредоносный SQL-код в запросы к базе данных. Код выполняется на сервере — это позволяет манипулировать данными, обходить авторизацию, извлекать или изменять конфиденциальную информацию.
SQL-инъекции работают так: данные из пользовательского ввода попадают в строку SQL-запроса к базе данных. 

* **ВИДЫ**
    Union SQL. Запросы объединяются в таблицу с помощью оператора UNION.
    Boolean-Based Blind SQLi. Злоумышленник определяет значение сущностей в базе данных с помощью логических операторов в запросе.
    Time-Based Blind SQLi. Злоумышленник извлекает информацию с помощью временных задержек.
    Out-of-Band Blind SQLi. Злоумышленник инициирует HTTP-взаимодействие со своим сервером для эксфильтрации из базы данных на свой сервер.
    Second Order SQLi. Проводится на этапе обновления или удаления данных. Разновидность SQL-инъекции. Возникает, когда данные пользователя сохраняются приложением и небезопасным образом включаются в SQL-запросы.
    NoSQL Injection — уязвимость, возникающая при неправильной обработке пользовательских данных в запросах к NoSQL базам данных. Она позволяет злоумышленникам манипулировать запросами и получать несанкционированный доступ к данным.
    
* **ПРОФИТ**
    Доступ к базе данных, паролям, перепискам пользователей, платёжной информации.
    Изменение данных в базе — злоумышленник может создать пользователя с правами администратора. Это грозит полной компрометацией веб-приложения.
    Удалённое выполнение кода на сервере.  
 
* **Точки входа** 
     В операторах UPDATE в обновленных значениях или в предложении WHERE.
     В операторах INSERT внутри вставленных значений.
     В операторах SELECT внутри имени таблицы или столбца.
     В операторах SELECT в предложении ORDER BY.

* **POC**   
'
"
`
')
")
`)
'))
"))
`))
'--
"--
`--
')--
")--
`)--
'))--
"))--
`))--
' + sleep(10)
' and sleep(10)
' && sleep(10)
' | sleep(10)
' or 1=1--
' or 1=2--

* **Защита**
1.	Параметризированные запросы — средство предварительной компиляции инструкций SQL. 
	Здесь значения введённых данных передаются как параметры, а не внедряются в текст запроса. 
	Этот метод позволяет базе данных распознавать код и отличать его от введённых данных.
    
    Вот пример параметризированного запроса:

Connection conn = DriverManager.getConnection(URL, USER, PASS);
// Создание запроса с каким-то параметром
String sql = "SELECT * FROM users WHERE email = ?";
// Генерация параметрезированного запроса.
PreparedStatement stmt = conn.prepareStatement(sql);
stmt.setString(1, email);
// Отправка запроса
ResultSet results = stmt.executeQuery(sql); 

Ключевое отличие — данные передаются в executeQuery(...). В случае параметризированных запросов параметризированная строка и параметры передаются в базу данных отдельно — это позволяет правильно их интерпретировать.

2.	ORM, или Object-Relational Mapping, тоже исключает возможность внедрения пользовательского ввода в SQL-запрос. Этот подход позволяет работать с базой данных на уровне объектов. ORM-фреймворки предоставляют средства для определения структуры данных в виде классов и их связей. Ещё они автоматически генерируют SQL-запросы для сохранения и извлечения данных из базы. ORM упрощает и ускоряет разработку приложений, делает код понятным и лёгким для поддержки.

3.	Белый список разрешённых значений.

